version: v1
# each orchestration item should have identity
id: resources_only
# description should be optional
description: "The basic openstack installation, everything on one node, without ha"
type: profile
driver: ansible
roles:
    - id: base-os
      resources:
          - id: provision_node
            events:
                - run:
                    - provision: os=ubuntu
                - remove:
                    - shell: erase
          - id: first
            type: resource
            driver: playbook
            actions:
                - run:
                    - shell: echo 1
                - remove:
                    - shell: echo 2
                - upgrade:
                    - shell: echo 3
                - scaleup:
                    - shell: echo 4
                    - shell: echo 56
                - maintenance:
                    - shell: echo 5
          - include: second
    - id: compute
      inherit: [base-os]
      resources:
        - id: vms
          requires: provision
          required_for: first


fuel execute --res provision --action remove --nodes 1,2,3

fuel execute --node 1 --action maintenance

fuel execute --node 1 --action run




